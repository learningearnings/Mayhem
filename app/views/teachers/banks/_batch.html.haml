- single_buck_image_base = 'credit_blank.png'
- plural_buck_image_base = 'credits_blank.png'

- single_buck_image_pdf = Rails.root.join('app', 'assets', 'images', single_buck_image_base)
- single_buck_image_html = image_path(single_buck_image_base)
- single_buck_image = params[:format] == 'pdf' ? single_buck_image_pdf : single_buck_image_html

- plural_buck_image_pdf = Rails.root.join('app', 'assets', 'images', plural_buck_image_base)
- plural_buck_image_html = image_path(plural_buck_image_base)
- plural_buck_image = params[:format] == 'pdf' ? plural_buck_image_pdf : plural_buck_image_html

- font_url_pdf = Rails.root.join('public', 'SketchRockwell-Bold.ttf')
- font_url_html = "/SketchRockwell-Bold.ttf"
- font_url = params[:format] == "pdf" ? font_url_pdf : font_url_html

%meta{'http-equiv' => "Content-Type", :content => "text/html; charset=utf-8"}
:css
  @font-face {
    font-family: 'SketchRockwell';
    src: url('#{font_url}') format('truetype');
  }
%style{type: 'text/css'}
  :sass
    body
      margin: 0mm
      padding: 0mm
      font-size: 70%
      width: 945px
    .break
      page-break-after: always
    .buck
      position: relative
      display: inline-block
      width: 300px
      margin-right: 10px
      .background-image
        width: 100%
      .code
        width: 30%
        text-align: center
        position: absolute
        top: 52%
        left: 55%
        font-size: 2em
        font-family: SketchRockwell
        color: #EE5B1A
      .amount
        width: 5%
        text-align: center
        position: absolute
        font-size: 1.8em
        font-family: SketchRockwell
      .double_digit_amount
        top: 20.5%
        left: 25%
        font-size: 3em
      .single_digit_amount
        top: 20.5%
        left: 30%
        font-size: 3em
      .expires
        width: 40%
        position: absolute
        top: 80%
        left: 60%
        font-size: 2em
        font-family: SketchRockwell
        color: #EE5B1A

.bucks
  - batch.otu_codes.in_groups_of(18,false) do |code_group|
    .break
    - code_group.each do |otu_code|
      .buck
        %img.background-image{ src: otu_code.points > 1 ? plural_buck_image : single_buck_image }
          .code= otu_code.code
          .amount{class: otu_code.points > 1 ? "double_digit_amount" : "single_digit_amount" }= otu_code.points.to_i
          .expires= otu_code.expires_at.to_date.to_s(:db)
