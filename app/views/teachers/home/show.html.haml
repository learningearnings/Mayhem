:plain
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
.main-content-wrapper
  .primary-content
    :javascript
      google.load('visualization', '1', {packages:['gauge', 'corechart']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Teachers', #{@teacher_dashboard_report.teacher_login_count}],
        ]);

        var options = {
          max: #{@teacher_dashboard_report.total_teacher_count},
          width: 200, height: 200,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('teacher_chart_div'));
        chart.draw(data, options);

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Students', #{@teacher_dashboard_report.student_login_count}],
        ]);

        var options = {
          max: #{@teacher_dashboard_report.total_student_count},
          width: 200, height: 200,
          minorTicks: 5
        };
        chart = new google.visualization.Gauge(document.getElementById('student_chart_div'));
        chart.draw(data, options);
      }

  .charts
    #teacher_chart_div.chart
    #student_chart_div.chart
    - current_person.school.grades.each do |grade|
      %div{id: "piechart_grade_#{grade[0]}", class: "chart"}
  - otu_code_categories = @teacher_dashboard_report.otu_code_categories
  - current_person.school.grades.each do |grade|
    :javascript
      var data = google.visualization.arrayToDataTable(#{otu_code_categories[grade[0]].unshift(["Buck Categories", "Number of Instances"]).inspect});

      var options = {
        title: 'Credits #{grade[1]}'
      };

      chart = new google.visualization.PieChart(document.getElementById('piechart_grade_#{grade[0]}'));
      chart.draw(data, options);
