{"version":3,"sources":["pds-library/src/pdsUtils.ts"],"names":[],"mappings":"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","file":"pdsUtils.js","sourcesContent":["import {CalendarDay} from './interfaces/calendar-day';\nexport let pdsUtils = {\n  pds: undefined,\n  ESCAPE_USER_INPUT_REGEX: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n  escapeUserInput(userInput: string): string {\n    if (userInput == null) {\n      return userInput;\n    }\n    return userInput.replace(this.ESCAPE_USER_INPUT_REGEX, '\\\\$&');\n  },\n  /**\n   * Returns true if a mobile browser is in use.\n   * All mobile browser checking should call here so that we can change the way we detect mobile users\n   * as well as identify areas where we do this easily.\n   *\n   * This method should be used as a last resort! For example, events which need to be\n   * called for mobile users in order to provide a good user experience but harm the desktop experience.\n   */\n  isMobile: function (): boolean {\n    return window.orientation != null;\n  },\n  /**\n   * Gets the number of milliseconds since that date in the 70s.\n   * @param date\n   * @returns {number}\n   */\n  dateToTime: function (date: Date): number | undefined {\n    //Yes, it's supposed to be a date, but this can be called from outside typescript so we check to make sure\n    //getTime is really there before we call it.\n    if (date != null && typeof date.getTime === 'function') {\n      return date.getTime();\n    }\n  },\n  /**\n   * Sub for $.closest()\n   * @param element\n   * @param selector\n   * @returns {any}\n   */\n  getClosest: function (element: HTMLElement, selector: string): {querySelector: (string) => any} | undefined {\n    if (element == null || typeof element.matches !== 'function' || selector == null) {\n      return;\n    }\n\n    while (element != null) {\n      try {\n        if (element.matches(selector)) {\n          return element;\n        }\n      } catch (e) {\n        // error with matches, may be caused by an invalid selector\n        return;\n      }\n\n      element = element.parentElement;\n    }\n  },\n  is: function (element: HTMLElement, selector: string): boolean | undefined {\n    if (element == null || typeof element.matches !== 'function' || selector == null) {\n      return;\n    }\n\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      // error with matches, may be caused by an invalid selector\n      return;\n    }\n  },\n  /**\n   * Sub for $.addClass()\n   * @param element a DOM element.\n   * @param className The class name to add.\n   */\n  addClass(element: HTMLElement, className: string): void {\n    if (element == null) {\n      return;\n    }\n    if (element.className == null || (typeof element.className === 'string' && element.className.length === 0)) {\n      //No class present\n      element.className = className;\n    } else if ((' ' + element.className + ' ').indexOf(' ' + className + ' ') === -1) {\n      //If the className is not in there already, append it to the end.\n      element.className += ' ' + className;\n    }\n  },\n  /**\n   * Sub for $.removeClass()\n   * @param element a DOM element\n   * @param className The class name to remove.\n   */\n  removeClass(element: HTMLElement, className: string): void {\n    if (element == null || element.className == null) {\n      return;\n    }\n    if (className != null && typeof className === 'string' && className.length > 0) {\n      element.className = (' ' + element.className + ' ').replace(' ' + className + ' ', ' ').trim();\n    }\n  },\n  /**\n   * Sub for _.flatten()\n   * @param arry\n   * @returns {Array}\n   */\n  flatten(arry: Array<any>): Array<any> {\n    let result: Array<any> = [];\n    if (arry != null && arry instanceof Array) {\n      arry.forEach((arrayElement: any) => {\n        if (arrayElement instanceof Array) {\n          this.flatten(arrayElement).forEach((flattenedElement: any) => {\n            result.push(flattenedElement);\n          });\n        } else {\n          result.push(arrayElement);\n        }\n      });\n    }\n    return result;\n  },\n  //Given a date, generate all the numbers.\n  generateDays(year: number, month: number, fillBlankDays = false): Array<CalendarDay> {\n    let dateTimes: Array<CalendarDay> = [];\n    //create a new date with the same year and month, but start on the first.\n    let dateItr = new Date(year, month, 1);\n\n    //subroutine for adding blanks\n    let addBlanks = function(loopTimes: number, computeDates: boolean, ascending: boolean): void {\n      let alterDate: Date | undefined;\n      if (computeDates) {\n        if (ascending) {\n          //Start (Loop times) before the first day of the month.\n          alterDate = new Date(year, month, -1 * loopTimes + 1);\n        } else {\n          //Start on First Day of next month\n          alterDate = new Date(year, month + 1, 1);\n        }\n      }\n\n      let sizeModSeven;\n      for (let i = 0; i < loopTimes; i++) {\n        sizeModSeven = (dateTimes.length) % 7;\n        if (computeDates && alterDate != null) {\n          dateTimes.push({\n            dayNum: alterDate.getDate(),\n            dateTimeNum: alterDate.getTime(),\n            isWeekend: sizeModSeven === 0 || sizeModSeven === 6,\n            isFilled: true\n          });\n          alterDate.setDate(alterDate.getDate() + 1);\n        } else {\n          dateTimes.push({\n            isWeekend: sizeModSeven === 0 || sizeModSeven === 6,\n            isFilled: true\n          });\n        }\n      }\n    };\n    //Day of week for first day of month => number of blanks.\n    addBlanks(dateItr.getDay(), fillBlankDays, true);\n\n    let sizeModSeven;\n    do {\n      sizeModSeven = (dateTimes.length) % 7;\n      dateTimes.push({\n        dayNum: dateItr.getDate(),\n        dateTimeNum: dateItr.getTime(),\n        isWeekend: sizeModSeven === 0 || sizeModSeven === 6\n      });\n      dateItr.setDate(dateItr.getDate() + 1);\n    }\n    while (dateItr.getMonth() === month);\n\n    if (dateTimes.length % 7 > 0) {\n      addBlanks(7 - (dateTimes.length % 7), fillBlankDays, false);\n    }\n\n    return dateTimes;\n  }\n};\n\n//Polyfill for .matches function. Gives IE compatibility.\n//I found this on Stack Overflow. Seems to work...\nif (!Element.prototype.matches) {\n  Element.prototype.matches =\n    (<any>Element.prototype).matchesSelector ||\n    (<any>Element.prototype).mozMatchesSelector ||\n    (<any>Element.prototype).msMatchesSelector ||\n    (<any>Element.prototype).oMatchesSelector ||\n    (<any>Element.prototype).webkitMatchesSelector ||\n    function (s: any): boolean {\n      let matches = (this.document || this.ownerDocument).querySelectorAll(s),\n        i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {\n      }\n      return i > -1;\n    };\n}\n"]}