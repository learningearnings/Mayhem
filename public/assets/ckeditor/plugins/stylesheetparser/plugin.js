/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){function e(e,t,n){var i=e.join(" ");i=i.replace(/(,|>|\+|~)/g," "),i=i.replace(/\[[^\]]*/g,""),i=i.replace(/#[^\s]*/g,""),i=i.replace(/\:{1,2}[^\s]*/g,""),i=i.replace(/\s+/g," ");for(var a=i.split(" "),o=[],r=0;r<a.length;r++){var s=a[r];n.test(s)&&!t.test(s)&&-1==CKEDITOR.tools.indexOf(o,s)&&o.push(s)}return o}function t(t,n,i){var a,o=[],r=[];for(a=0;a<t.styleSheets.length;a++){var s=t.styleSheets[a],l=s.ownerNode||s.owningElement;if(!(l.getAttribute("data-cke-temp")||s.href&&"chrome://"==s.href.substr(0,9)))for(var c=s.cssRules||s.rules,d=0;d<c.length;d++)r.push(c[d].selectorText)}var u=e(r,n,i);for(a=0;a<u.length;a++){var h=u[a].split("."),p=h[0].toLowerCase(),m=h[1];o.push({name:p+"."+m,element:p,attributes:{"class":m}})}return o}CKEDITOR.plugins.add("stylesheetparser",{requires:["styles"],onLoad:function(){var e=CKEDITOR.editor.prototype;e.getStylesSet=CKEDITOR.tools.override(e.getStylesSet,function(e){return function(n){var i=this;e.call(this,function(e){var a=i.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,o=i.config.stylesheetParser_validSelectors||/\w+\.\w+/;n(i._.stylesDefinitions=e.concat(t(i.document.$,a,o)))})}})}})}();